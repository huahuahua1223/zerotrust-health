

# ZK Medical Insurance 前端开发计划

## 🎨 设计理念
采用**现代扁平风**设计：清新渐变配色（蓝绿/紫粉）、大圆角卡片、友好的图标和插画、流畅的微动效。整体风格传达"专业可信赖"与"科技创新"的双重形象，让用户感受到零知识证明技术保护隐私的安心感。

---

## 📦 第一阶段：基础架构搭建

### 1. 项目结构与配置
- 工程化目录结构（config/hooks/lib/store/types/components/pages）
- Web3 配置（wagmi + reown/appkit 钱包连接）
- 合约 ABI 和地址配置（支持 Hardhat + Sepolia 双网络）
- 环境变量管理

### 2. 全局功能
- **主题切换**：日间/夜间模式（使用 CSS 变量 + next-themes）
- **多语言切换**：中文/英文（使用 i18next 或自定义 context）
- **响应式布局**：移动端优先设计

### 3. 布局组件
- Header（Logo、导航菜单、钱包连接按钮、语言/主题切换）
- Footer
- 移动端抽屉菜单
- 网络状态检测与切换提示

---

## 🏠 第二阶段：公共页面

### 1. 首页 `/`
- 英雄区：项目介绍 + ZK 隐私保护亮点
- 保险产品精选展示
- 快速入口卡片（浏览产品、我的保单、提交理赔）
- 如何使用流程图

### 2. 产品列表页 `/products`
- 产品卡片网格展示（保费、保额、期限、资金池余额）
- 筛选与排序功能
- 分页/无限滚动加载

### 3. 产品详情页 `/products/:id`
- 产品完整信息展示
- 资金池余额可视化
- 购买保单流程（两步交易：approve + buyPolicy）
- 交易状态反馈

---

## 👤 第三阶段：用户功能

### 1. 我的保单页 `/my-policies`
- 用户保单列表
- 状态徽章（Active/Expired/Cancelled）
- 到期提醒
- 点击进入详情

### 2. 保单详情页 `/my-policies/:id`
- 保单完整信息
- 关联产品信息
- 快捷发起理赔按钮

### 3. 提交理赔页 `/claim/new` ⭐ 核心功能
**五步向导式表单：**
1. **选择保单**：从有效保单中选择
2. **填写信息**：疾病类型、理赔金额
3. **上传文件**：医疗文件上传（模拟 IPFS）
4. **生成 ZK 证明**：使用 snarkjs 在浏览器中生成
5. **确认提交**：调用 submitClaimWithProof

每一步都有进度指示器，用户可以前后导航

### 4. 我的理赔页 `/my-claims`
- 理赔记录列表
- 状态时间线（Submitted → Verified → Approved/Rejected → Paid）

### 5. 理赔详情页 `/claims/:id`
- 理赔完整信息
- 状态追踪时间线
- ZK 证明验证状态展示

---

## 🏢 第四阶段：保险公司功能

### 1. 仪表板 `/insurer/dashboard`
- 统计卡片（产品数、保单数、待审批理赔、总资金池）
- 快捷操作入口
- 近期理赔列表

### 2. 产品管理 `/insurer/products`
- 我的产品列表
- 创建新产品表单
- 产品激活/禁用
- 资金池注资功能

### 3. 理赔审批 `/insurer/claims`
- 待审批理赔列表
- 审批/拒绝操作
- 支付理赔功能

### 4. 角色权限守卫
- InsurerGuard 组件
- 自动检测用户角色
- 无权限时重定向

---

## 🔧 第五阶段：管理员功能

### 1. 角色管理 `/admin/roles`
- 授予/撤销角色
- 角色列表查询

### 2. 系统设置 `/admin/system`
- 合约暂停/恢复
- 验证器更新

---

## ⚙️ 技术实现要点

### Web3 集成
- wagmi hooks（useReadContract, useWriteContract, useWaitForTransactionReceipt）
- reown/appkit 钱包连接 UI
- 多链支持配置
- 交易状态 Toast 通知

### ZK 证明集成
- snarkjs WASM 加载（使用 Web Worker 避免阻塞）
- 证明输入构建
- 证明格式转换（适配合约调用）
- 进度展示与错误处理

### 状态管理
- Zustand：理赔表单状态、UI 状态
- TanStack Query：合约数据缓存与刷新
- 事件监听实时更新

### 国际化 (i18n)
- 中英文语言包
- 语言切换持久化
- 日期/数字格式本地化

---

## 📱 响应式设计

- 移动端优先（Mobile First）
- 断点：sm(640px) / md(768px) / lg(1024px) / xl(1280px)
- 移动端抽屉导航
- 触摸友好的交互

---

## 🎯 预期成果

完成后，您将拥有一个：
1. **功能完整**的 ZK 医疗保险 DApp 前端
2. **三种角色**（用户/保险公司/管理员）完整业务流程
3. **前端 ZK 证明**生成能力
4. **中英双语**支持
5. **日夜模式**主题切换
6. **响应式**设计，支持移动端
7. **工程化**代码结构，易于维护和扩展

